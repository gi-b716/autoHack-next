# 本地化 (Internationalization)

autohack-next 支持多语言本地化，目前支持：

- 英语 (en_US) - 默认语言
- 简体中文 (zh_CN)

## 使用方法

### 自动检测语言

程序会自动检测系统语言：

```python
from autohack.i18n import setup_i18n, _

# 自动检测系统语言
setup_i18n()

# 使用翻译
print(_("Data folder path: \"{0}\"").format("/path/to/data"))
```

### 手动设置语言

```python
from autohack.i18n import setup_i18n, _

# 设置为中文
setup_i18n('zh_CN')
print(_("Compile finished."))  # 输出: 编译完成。

# 设置为英文
setup_i18n('en_US') 
print(_("Compile finished."))  # 输出: Compile finished.
```

## 翻译文件结构

```
src/autohack/locale/
├── autohack.pot          # 翻译模板文件
├── zh_CN/
│   └── LC_MESSAGES/
│       ├── autohack.po   # 中文翻译源文件
│       └── autohack.mo   # 中文翻译编译文件
└── en_US/
    └── LC_MESSAGES/
        ├── autohack.po   # 英文翻译源文件
        └── autohack.mo   # 英文翻译编译文件
```

## 添加新翻译

1. 在 `src/autohack/i18n.py` 的 `TRANSLATIONS` 字典中添加新语言：

```python
TRANSLATIONS = {
    'zh_CN': {
        'Hello': '你好',
        # ... 其他翻译
    },
    'fr_FR': {  # 添加法语
        'Hello': 'Bonjour',
        # ... 其他翻译
    }
}
```

2. 在代码中使用：

```python
setup_i18n('fr_FR')
print(_("Hello"))  # 输出: Bonjour
```

## 编译翻译文件

如果使用传统的 gettext 方式（目前暂不使用），可以运行：

```bash
python compile_translations.py
```

这会将所有 `.po` 文件编译为 `.mo` 文件。

## 支持的消息

当前支持的翻译消息包括：

- 初始化消息
- 编译消息 
- 数据生成和处理消息
- 错误消息
- 配置消息
- 日志消息
- 检查器消息

完整的消息列表请参考 `src/autohack/locale/autohack.pot` 文件。
